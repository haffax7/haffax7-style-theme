// 1. 공통 너비 및 헤더 정렬
$theme-max-width: 1150px; 

@media screen and (min-width: 1100px) {
  .d-header {
    display: flex !important;
    justify-content: center !important;
    .wrap {
      width: $theme-max-width !important;
      max-width: $theme-max-width !important;
      margin: 0 auto !important;
      display: flex !important;
      justify-content: space-between !important;
    }
  }

  // 2. 3단 그리드 강제 복구 (사라진 오른쪽 섹션 고정)
  .navigation-topics, .categories-list, .tags-page {
    #main-outlet-wrapper {
      display: grid !important;
      grid-template-columns: 220px 600px 300px !important;
      grid-template-areas: 
        "sidebar main-list right-side"
        ". custom-footer ." !important; 
      gap: 0 15px !important;
      width: $theme-max-width !important;
      margin: 0 auto !important;
      align-items: start !important;
    }
    #main-outlet { grid-area: main-list !important; width: 600px !important; padding-top: 0 !important; }
    .before-main-outlet-connector, .haffax7-right-sidebar-target { 
      display: block !important; 
      grid-area: right-side !important; 
    }
  }

  // 3. [핵심] 글 리스트 구조 변경 (아바타를 왼쪽으로)
  .topic-list-body {
    .topic-list-item {
      display: flex !important; // 테이블 행을 플렉스로 변경
      align-items: center !important;
      padding: 10px 0 !important;
      border-bottom: 1px solid #f0f0f0 !important;

      // 아바타 영역을 가장 앞으로 보냄
      .posters {
        order: -1 !important; // 순서를 맨 앞으로
        width: 45px !important;
        display: flex !important;
        justify-content: center !important;
        margin-right: 12px !important;
        border: none !important;
        padding: 0 !important;
        
        // 여러 아바타 중 첫 번째(작성자)만 노출
        a:not(:first-child) { display: none !important; }
        img { 
          width: 36px !important; 
          height: 36px !important; 
          border-radius: 50% !important; 
          display: block !important;
        }
      }

      // 제목 영역
      .main-link {
        order: 1 !important;
        flex: 1 !important;
        border: none !important;
        padding: 0 !important;
        min-width: 0 !important;
      }

      // 조회수, 댓글수 등 숫자 영역
      .posts, .views, .num.age, .activity {
        order: 2 !important;
        width: 70px !important;
        text-align: center !important;
        border: none !important;
        font-size: 0.85rem !important;
        color: #919191 !important;
      }
    }
  }

  // 테이블 헤더 숨기기 (구조가 바뀌어 맞지 않으므로)
  .topic-list-header { display: none !important; }

  // 4. 사이드바 및 푸터 설정
  .sidebar-wrapper {
    grid-area: sidebar !important;
    position: sticky !important; top: 80px !important;
    .sidebar-sections { padding-top: 0 !important; }
  }

  .powered-by-discourse {
    grid-area: custom-footer !important;
    display: flex !important;
    justify-content: flex-start !important;
    margin: 40px 0 20px 0 !important;
  }
}

body { background-color: #ffffff !important; }
